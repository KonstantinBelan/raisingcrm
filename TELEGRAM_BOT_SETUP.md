# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram Bot –¥–ª—è Raising CRM

## –û–±–∑–æ—Ä

Telegram Bot –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ Raising CRM –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á –∏–∑ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —á–∞—Ç–∞—Ö —Å –ø–æ–º–æ—â—å—é –ò–ò-–∞–Ω–∞–ª–∏–∑–∞.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ü§ñ **–ò–ò-–∞–Ω–∞–ª–∏–∑ —Å–æ–æ–±—â–µ–Ω–∏–π** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∑–∞–¥–∞—á–∞—Ö
- üìù **–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á –∏–∑ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- üè∑Ô∏è **–•–µ—à—Ç–µ–≥–∏** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ö–µ—à—Ç–µ–≥–æ–≤ –¥–ª—è —É—Ç–æ—á–Ω–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- üì® **–ü–µ—Ä–µ—Å–ª–∞–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–µ—Ä–µ—Å–ª–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- üìä **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** - –æ—Ç—á–µ—Ç—ã –ø–æ —Å–æ–∑–¥–∞–Ω–Ω—ã–º –∑–∞–¥–∞—á–∞–º
- üîó **–ê–≤—Ç–æ—Å–≤—è–∑—ã–≤–∞–Ω–∏–µ** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∏ –ø—Ä–∏–≤—è–∑–∫–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤/–ø—Ä–æ–µ–∫—Ç–æ–≤

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –°–æ–∑–¥–∞–Ω–∏–µ Telegram Bot

1. –ù–∞–π–¥–∏—Ç–µ [@BotFather](https://t.me/botfather) –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `/newbot`
3. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –±–æ—Ç–∞
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω

### 2. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–î–æ–±–∞–≤—å—Ç–µ –≤ —Ñ–∞–π–ª `.env.local`:

```env
# –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ
TELEGRAM_BOT_TOKEN=your_bot_token_here
DATABASE_URL=postgresql://raising_user:raising_password@localhost:5432/raising_crm

# –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ (–¥–ª—è –ò–ò-–∞–Ω–∞–ª–∏–∑–∞)
OPENROUTER_API_KEY=your_openrouter_api_key_here
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ webhook

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ webhook
curl -X POST http://localhost:3001/api/telegram/setup \
  -H "Content-Type: application/json" \
  -d '{"url": "https://your-domain.com/api/telegram/webhook"}'

# –ü—Ä–æ–≤–µ—Ä–∫–∞ webhook
curl -X GET http://localhost:3001/api/telegram/setup
```

## –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

- `/start` - –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –±–æ—Ç–æ–º
- `/help` - –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É
- `/status` - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- `/stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –∑–∞–¥–∞—á

### –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á

–ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ —Å–æ–∑–¥–∞–µ—Ç –∑–∞–¥–∞—á–∏. –ü—Ä–∏–º–µ—Ä—ã:

```
–ò—Å–ø—Ä–∞–≤–∏—Ç—å –±–∞–≥ –≤ —Ñ–æ—Ä–º–µ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏ –Ω–∞ —Å–∞–π—Ç–µ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞ –ü–µ—Ç—Ä–æ–≤ –¥–æ 25 –¥–µ–∫–∞–±—Ä—è

–ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—é –¥–ª—è –≤—Å—Ç—Ä–µ—á–∏ —Å –Ω–æ–≤—ã–º –∫–ª–∏–µ–Ω—Ç–æ–º –Ω–∞ —Å–ª–µ–¥—É—é—â–µ–π –Ω–µ–¥–µ–ª–µ

–°—Ä–æ—á–Ω–æ: –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å –¥–∏–∑–∞–π–Ω –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –¥–æ –ø—è—Ç–Ω–∏—Ü—ã
```

### –•–µ—à—Ç–µ–≥–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

- `#—Å—Ä–æ—á–Ω–æ` `#–≤—ã—Å–æ–∫–∏–π` `#urgent` - –≤—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
- `#—Å—Ä–µ–¥–Ω–∏–π` `#medium` - —Å—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
- `#–∫–ª–∏–µ–Ω—Ç–ò–≤–∞–Ω–æ–≤` - –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞ "–ò–≤–∞–Ω–æ–≤"
- `#–ø—Ä–æ–µ–∫—Ç–°–∞–π—Ç` - –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ "–°–∞–π—Ç"

## –ò–ò-–∞–Ω–∞–ª–∏–∑

–ü—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ `OPENROUTER_API_KEY` –±–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ò–ò –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Å–æ–æ–±—â–µ–Ω–∏–π:

- –ò–∑–≤–ª–µ–∫–∞–µ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏
- –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—é
- –ù–∞—Ö–æ–¥–∏—Ç —É–ø–æ–º–∏–Ω–∞–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏ –ø—Ä–æ–µ–∫—Ç–æ–≤
- –†–∞—Å–ø–æ–∑–Ω–∞–µ—Ç –¥–∞—Ç—ã –∏ —Å—Ä–æ–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- –û—Ü–µ–Ω–∏–≤–∞–µ—Ç –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

## API Endpoints

### Webhook
- `POST /api/telegram/webhook` - –ø–æ–ª—É—á–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –æ—Ç Telegram
- `GET /api/telegram/webhook` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞
- `POST /api/telegram/setup` - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ webhook URL
- `GET /api/telegram/setup` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ webhook

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–ë–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ —Ç–∞–±–ª–∏—Ü—ã:

- `User` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–∏—Å—Ç–µ–º—ã
- `Task` - –∑–∞–¥–∞—á–∏ —Å –ø–æ–ª—è–º–∏ –¥–ª—è Telegram –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- `Project` - –ø—Ä–æ–µ–∫—Ç—ã (—Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
- `Client` - –∫–ª–∏–µ–Ω—Ç—ã (—Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
- `TelegramChat` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —á–∞—Ç–∞—Ö

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –∑–∞—â–∏—â–µ–Ω–Ω—ã–π webhook
- –¢–æ–∫–µ–Ω –±–æ—Ç–∞ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –î–æ—Å—Ç—É–ø –∫ API –æ–≥—Ä–∞–Ω–∏—á–µ–Ω –≤–∞–ª–∏–¥–Ω—ã–º–∏ Telegram –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏

## –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î

```bash
docker exec -it raising-crm-postgres psql -U raising_user -d raising_crm -c "\dt"
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
# –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
npm run dev

# –õ–æ–≥–∏ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker logs raising-crm-postgres
docker logs raising-crm-redis
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ webhook

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
curl -X GET http://localhost:3001/api/telegram/webhook

# –¢–µ—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏ (—Ç—Ä–µ–±—É–µ—Ç –≤–∞–ª–∏–¥–Ω—ã–π —Ç–æ–∫–µ–Ω)
curl -X POST http://localhost:3001/api/telegram/webhook \
  -H "Content-Type: application/json" \
  -d '{"message": {"text": "–¢–µ—Å—Ç–æ–≤–∞—è –∑–∞–¥–∞—á–∞", "chat": {"id": 123}, "message_id": 1}}'
```

## –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã: `docker-compose up -d`
2. –°–æ–∑–¥–∞–π—Ç–µ —Ç–∞–±–ª–∏—Ü—ã –ë–î: –≤—ã–ø–æ–ª–Ω–∏—Ç–µ `create_tables.sql`
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ `.env.local`
4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: `npm run dev`
5. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ webhook –¥–ª—è –≤–∞—à–µ–≥–æ –¥–æ–º–µ–Ω–∞

### –ü—Ä–æ–¥–∞–∫—à–Ω

1. –†–∞–∑–≤–µ—Ä–Ω–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (Vercel, Netlify, VPS)
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ webhook —Å –ø—É–±–ª–∏—á–Ω—ã–º URL
4. –î–æ–±–∞–≤—å—Ç–µ –±–æ—Ç–∞ –≤ –Ω—É–∂–Ω—ã–µ —á–∞—Ç—ã

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ —Ç–æ–∫–µ–Ω–∞ –±–æ—Ç–∞
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ webhook

## –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é Raising CRM –∏ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ —Ç–æ–π –∂–µ –ª–∏—Ü–µ–Ω–∑–∏–µ–π.
